import{j as c}from"./jsx-runtime-D_zvdyIk.js";import{a as j,c as F,o as M,f as S,s as $}from"./floating-ui.dom-D8S3B1vO.js";import{S as C}from"./index-Cb-ENzfG.js";import{c as O}from"./lite-DaUVFjkg.js";import{r as t}from"./index-D4lIrffr.js";import{u as A}from"./floating-ui.react-VFS6-CKd.js";const I=t.forwardRef(function({id:n,children:o,content:p,placement:r="top",open:a,className:v,...E},R){const d=t.useId(),[b,f]=t.useState(!1),g=t.useRef(null),y=t.useRef(null),k=A([y,R]),l=a??b,h=()=>{f(!0)},w=()=>{f(!1)};t.useEffect(()=>{var x;const e=y.current,i=g.current;if((x=e==null?void 0:e.togglePopover)==null||x.call(e,l),e&&(e.style.opacity=l?"1":"0"),e&&i&&l)return j(i,e,()=>{F(i,e,{placement:r,strategy:"fixed",middleware:[M(u=>{const m=getComputedStyle(u.elements.floating,"::before");return parseFloat(m.height)}),S({fallbackAxisSideDirection:"start"}),$(),L]}).then(({x:u,y:m})=>{e.style.translate=`${u}px ${m}px`})})},[l,r]),t.useEffect(()=>{const e=i=>{i.key==="Escape"&&f(!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[]);const T=typeof o=="string"?"span":C;if(typeof o!="string"&&o.type===t.Fragment)return console.error("<Tooltip> children needs to be a single ReactElement that can receive a ref and not: <Fragment/> | <></>"),null;const P={[t.version.startsWith("19")?"popoverTarget":"popovertarget"]:n??d,[t.version.startsWith("19")?"popoverTargetAction":"popovertargetaction"]:"show"};return c.jsxs(c.Fragment,{children:[c.jsx(T,{ref:g,...P,onMouseEnter:h,onMouseLeave:w,onFocus:h,onBlur:w,children:o}),c.jsx("div",{ref:k,role:"tooltip",className:O("ds-tooltip",v),id:n??d,popover:"manual",...E,children:p})]})}),L={name:"ArrowPseudoElement",fn(s){const{elements:n,rects:o,placement:p}=s;let r=`${Math.round(o.reference.width/2+o.reference.x-s.x)}px`,a=`${Math.round(o.reference.height/2+o.reference.y-s.y)}px`;switch(p){case"top":a="100%";break;case"right":r="0";break;case"bottom":a="0";break;case"left":r="100%";break}return n.floating.style.setProperty("--dsc-tooltip-arrow-x",r),n.floating.style.setProperty("--dsc-tooltip-arrow-y",a),s}},X=I;export{X as T};
