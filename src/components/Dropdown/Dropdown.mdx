import { Meta, Primary, Controls, Canvas, ArgTypes } from '@storybook/addon-docs/blocks';
import * as DropdownStories from './Dropdown.stories';
import { Dropdown } from './';

<Meta of={DropdownStories} />

# Dropdown

#### `Dropdown` er en fleksibel nedtrekkskomponent som bygger videre på nettleserens popover-mekanisme. Den egner seg godt til menyer og handlingslister.

<Primary />
<Controls />

---

## Bruk

```tsx
import { Dropdown } from 'rk-designsystem';

// med context
<Dropdown.TriggerContext>
  <Dropdown.Trigger>Trigger</Dropdown.Trigger>
  <Dropdown>
    <Dropdown.Heading>Heading</Dropdown.Heading>
    <Dropdown.List>
      <Dropdown.Item>
        <Dropdown.Button>Item</Dropdown.Button>
      </Dropdown.Item>
    </Dropdown.List>
  </Dropdown>
  </Dropdown.TriggerContext>

// uten context
<Button popovertarget="my-dropdown">Trigger</Button>
<Dropdown id="my-dropdown">
  <Dropdown.Heading>Heading</Dropdown.Heading>
  <Dropdown.List>
    <Dropdown.Item>
      <Dropdown.Button>Item</Dropdown.Button>
    </Dropdown.Item>
  </Dropdown.List>
</Dropdown>
```

### React og `popovertarget`

Når du ikke bruker `Dropdown.TriggerContext`, må du koble sammen utløser og popover selv. Bruk da attributtet `popovertarget` i små bokstaver slik at alle React-versjoner gjengir attributtet korrekt.

### Polyfill

`Dropdown` benytter Popover API. Dette er bredt støttet i moderne nettlesere (Baseline ca. april 2024). Dersom du må støtte eldre nettlesere, kan en polyfill være aktuelt: `https://github.com/oddbird/popover-polyfill`.

---

## Kodeeksempler

### Standard
<Canvas of={DropdownStories.Default} />

### Kontrollert
Hvis du sender inn `open`, brukes `Dropdown` kontrollert. Du kan lytte på `onClose` for å få beskjed når komponenten ber om å lukkes.
<Canvas of={DropdownStories.Controlled} />

### Uten `Dropdown.Trigger`
`Dropdown` bygger på Popover API, så du kan bruke den uten `Dropdown.Trigger`. Da må du legge på `popovertarget={id}` på utløseren, og `id` på `Dropdown`.
<Canvas of={DropdownStories.WithoutContext} />

### Plassering
Endre `placement` for å kontrollere hvor menyen åpner seg i forhold til utløseren.
<Canvas of={DropdownStories.TopPlacement} />

---

## Tilgjengelighet

Popover-API-et følger åpen/lukket-tilstand og fungerer med standard tastaturnavigasjon.

### Tastaturnavigasjon
* <kbd>Enter</kbd> eller <kbd>Space</kbd> åpner/lukker menyen
* <kbd>Enter</kbd> eller <kbd>Space</kbd> aktiverer markert element
* <kbd>Esc</kbd> lukker menyen

### Tastatur
`Dropdown` har ikke innebygd piltast-navigasjon for menyer. For mer avansert mønster kan du supplere med en fokusstyringshjelper (f.eks. roving focus).

---

## `Dropdown.List`
<ArgTypes of={Dropdown.List} />

## `Dropdown.Trigger`
<ArgTypes of={Dropdown.Trigger} />

---

## CSS-variabler

Ingen dedikerte CSS-variabler er dokumentert for `Dropdown` i denne demoen.


