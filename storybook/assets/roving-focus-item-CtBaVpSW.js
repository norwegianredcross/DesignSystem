import{r as l,j as I}from"./iframe-NSlXxCFF.js";import{S as F}from"./index-fxYSzXt9.js";import{u as S}from"./use-merge-refs-tYagDv3b.js";const D=l.createContext({elements:{current:new Map},getOrderedItems:()=>[],setFocusableValue:()=>{},onShiftTab:()=>{},focusableValue:null,orientation:"horizontal"}),K=l.forwardRef(({activeValue:e,asChild:f,orientation:t="horizontal",onBlur:a,onFocus:d,...s},h)=>{const n=f?F:"div",o=e??null,[i,w]=l.useState(o),[u,c]=l.useState(!1),r=l.useRef(new Map),m=l.useRef(null),O=S([h,m]),v=()=>{if(!m.current)return[];const g=Array.from(m.current.querySelectorAll("[data-roving-tabindex-item]"));return Array.from(r.current).sort((b,x)=>g.indexOf(b[1])-g.indexOf(x[1])).map(([b,x])=>({value:b,element:x}))};return l.useEffect(()=>{w(o)},[o]),I.jsx(D.Provider,{value:{elements:r,getOrderedItems:v,focusableValue:i,setFocusableValue:w,onShiftTab:()=>{c(!0)},orientation:t},children:I.jsx(n,{...s,tabIndex:u?-1:0,onBlur:g=>{a==null||a(g),c(!1),w(e??null)},onFocus:g=>{var x,k,A;if(d==null||d(g),g.target!==g.currentTarget)return;const b=v();b.length!==0&&(i!=null?(x=r.current.get(i))==null||x.focus():e!=null?(k=r.current.get(e))==null||k.focus():(A=b.at(0))==null||A.element.focus())},ref:O})})}),T=e=>{const{elements:f,getOrderedItems:t,setFocusableValue:a,focusableValue:d,onShiftTab:s,orientation:h}=l.useContext(D);return{getOrderedItems:t,isFocusable:d===e,orientation:h,getRovingProps:n=>({...n,ref:o=>{o?f.current.set(e,o):f.current.delete(e)},onKeyDown:o=>{var i;if((i=n==null?void 0:n.onKeyDown)==null||i.call(n,o),o.shiftKey&&o.key==="Tab"){s();return}},onFocus:o=>{var i;(i=n==null?void 0:n.onFocus)==null||i.call(n,o),a(e)},"data-roving-tabindex-item":!0,tabIndex:d===e?0:-1})}};function y(e,f){const t=e.findIndex(a=>a.value===f);return e.at(t===e.length-1?0:t+1)}function R(e,f){const t=e.findIndex(a=>a.value===f);return e.at(t===0?-1:t-1)}const P=l.forwardRef(({value:e,asChild:f,...t},a)=>{const d=f?F:"div",s=e??(typeof t.children=="string"?t.children:""),{getOrderedItems:h,getRovingProps:n,orientation:o}=T(s),i=n({onKeyDown:u=>{var m;(m=t==null?void 0:t.onKeyDown)==null||m.call(t,u);const c=h();let r;switch(o){case"horizontal":u.key==="ArrowRight"&&(r=y(c,s)),u.key==="ArrowLeft"&&(r=R(c,s));break;case"vertical":u.key==="ArrowDown"&&(r=y(c,s)),u.key==="ArrowUp"&&(r=R(c,s));break;case"ambiguous":["ArrowRight","ArrowDown"].includes(u.key)&&(r=y(c,s)),["ArrowLeft","ArrowUp"].includes(u.key)&&(r=R(c,s))}u.key==="Home"&&(r=c[0]),u.key==="End"&&(r=c[c.length-1]),r&&(u.preventDefault(),r.element.focus())}}),w=S([a,i.ref]);return I.jsx(d,{...t,...i,ref:w,children:t.children})});export{K as R,P as a};
